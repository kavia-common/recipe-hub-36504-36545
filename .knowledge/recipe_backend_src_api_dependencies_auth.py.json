{"is_source_file": true, "format": "Python", "description": "This file defines dependency functions for FastAPI endpoints, specifically handling authentication and authorization for user and recipe-related operations. It imports dependencies from FastAPI, SQLAlchemy, and internal modules like models, services, and security, providing utility functions to retrieve the current user and ensure user ownership of a recipe.", "external_files": ["../db", "../models", "../security", "../services/recipe_service"], "external_methods": ["get_db", "get_current_user", "get_recipe_or_404", "ensure_owner"], "published": ["current_user", "recipe_owned_by_current_user"], "classes": [], "methods": [{"name": "User current_user( db: Session = Depends(get_db), token_user: User = Depends(get_current_user), )", "description": "Returns the currently authenticated user by wrapping the security.get_current_user dependency.", "scope": "", "scopeKind": ""}, {"name": "Recipe recipe_owned_by_current_user( recipe_id: int, db: Session = Depends(get_db), user: User = Depends(current_user), )", "description": "Ensures that a recipe exists and is owned by the current user; raises HTTP exceptions if not.", "scope": "", "scopeKind": ""}], "calls": ["Depends", "get_db", "get_current_user", "get_recipe_or_404", "ensure_owner", "HTTPException"], "search-terms": ["auth dependency", "recipe ownership", "FastAPI dependency", "security get_current_user", "recipe service"], "state": 2, "file_id": 16, "knowledge_revision": 47, "git_revision": "cce94d8f2aca9047abcb3c481617b801b7162043", "revision_history": [{"37": ""}, {"39": ""}, {"41": "cce94d8f2aca9047abcb3c481617b801b7162043"}, {"47": "cce94d8f2aca9047abcb3c481617b801b7162043"}], "ctags": [{"_type": "tag", "name": "current_user", "path": "/home/kavia/workspace/code-generation/recipe-hub-36504-36545/recipe_backend/src/api/dependencies/auth.py", "pattern": "/^def current_user($/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "( db: Session = Depends(get_db), token_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "recipe_owned_by_current_user", "path": "/home/kavia/workspace/code-generation/recipe-hub-36504-36545/recipe_backend/src/api/dependencies/auth.py", "pattern": "/^def recipe_owned_by_current_user($/", "language": "Python", "typeref": "typename:Recipe", "kind": "function", "signature": "( recipe_id: int, db: Session = Depends(get_db), user: User = Depends(current_user), )"}], "hash": "8a0a82abe8ff25e6e5389f296cfba61f", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/api/dependencies/auth.py"}